<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../JavaScript/canvasmap.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.6.0/papaparse.min.js"></script>
</head>
<body>

<canvas id="my-scatter-chart" width="1000" height="500"></canvas>

<script>
    fetch('../Data/cities5000.csv')
            .then(response => response.text())
    .then((csv) => {
        let data = Papa.parse(csv, {header: true});
        drawData(data.data);
    });

    function drawData(datasets) {
        let coordset = [];
        datasets.forEach(city => {
            let obj = {
                x: city.longitude,
                y: city.latitude
            }
            coordset.push(obj);
        });

        let dataObj = {
            datasets: [
                {
                    label: "Label",
                    data: coordset,
                    pointRadius: .25,
                    pointBackgroundColor: 'red'
                }
            ]
        }

        let chartObj = {
            type: "scatter",
            data: dataObj,
            options: {
                animation: {
                    duration: 0
                },
                title: {
                    display: false
                },
                responsive: false,
                legend: {
                    display: false
                },
                scales: {
                    xAxes: [
                        {
                            type: 'logarithmic',
                        }
                    ],
                    yAxes: [
                        {
                            type: 'logarithmic',
                        }
                    ]
                }

            }
        };
        new Chart("my-scatter-chart", chartObj);
    }

</script>

</body>
</html>