<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        rect.bar {
            fill: blue;
        }
        .this {
            fill: aquamarine;
        }
        .group {
            fill: red;
        }
        .svg {
            fill: green;
        }
        rect.border {
            fill: rgba(255,0,0,0.1);
            stroke-width: 3;
        }
        svg {
            background-color: rgba(0,255,0,0.1);
            border: solid 1px green;
            position: absolute;
            left: 50px;
            top: 50px;
        }
        .border {
            stroke: red;
        }
    </style>
</head>
<body>

<script>
    const width = 800, height = 600;
    const margin = 100;

    const svg = d3.select("body")
            .append("svg")
            .attr("height",height)
            .attr("width",width)

    const g = svg.append("g")
                 .attr("transform", `translate(${[margin, height - margin]})`)

    const border = g.append("rect").attr("class", "border")
            .attr("width", width - margin*2)
            .attr("height", height - margin*2)
            .attr("y", - height + margin*2)

    const bar = g.append("rect").attr("class", "bar")
            .attr("width", 100)
            .attr("height", 200)
            .attr("x", 50)
            .attr("y", -200)

    const rects = [...document.getElementsByTagName("rect")]
    rects.forEach(d => d.addEventListener('click', clicked));

    function clicked() {
        event.stopPropagation();
        console.log(this); // which element was clicked?

        console.log("MouseEvent", [event.clientX, event.clientY])
        console.log("d3.event", [event.x, event.y])

        //g.append("circle").attr("class","this")
        //        .attr("r", 5)
        //        .attr("cx", tx)
        //        .attr("cy", ty)
    }

</script>

</body>
</html>