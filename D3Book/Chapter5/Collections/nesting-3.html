<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
</head>
<body>
<script>

    const movies = [
        {title: 'The Shining', director: 'Stanley Kubrick', year: 1980},
        {title: 'A Clockwork Orange', director: 'Stanley Kubrick', year: 1972},
        {title: 'The Shape of Water', director: 'Guillermo del Toro', year: 2017},
        {title: 'El Laberinto del Fauno', director: 'Guillermo del Toro', year: 2006},
        {title: '2001: A Space Odyssey', director: 'Stanley Kubrick', year: 1968},
        {title: 'Wonder Woman', director: 'Patty Jenkins', year: 2017},
    ];

    const groupByDirector =
            d3.nest()
              .key(d => d.director)
              .sortKeys((a,b) => d3.ascending(a, b))
              .sortValues((a,b) => d3.ascending(a.year, b.year))
              .rollup(function(values) {
                  return values.map(d => d.title + " (" + d.year + ")");
              })
              .entries(movies);

    console.log(groupByDirector);

    const groupByYear =
            d3.nest()
              .key(d => d.year)
              .sortKeys((a,b) => d3.ascending(a, b))
              .rollup(v => v.map(d => d.title + " (" + d.director + ")"))
              .entries(movies);

    console.log(groupByYear);

</script>

</body>
</html>